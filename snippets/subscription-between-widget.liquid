<div class="flex flex-col w-full gap-0 max-w-[500px] mx-auto">

  <!-- Header -->
  <div class="text-center mb-4">
    <div class="text-[13px] text-[#666] mb-1">Refills auto-ship every 3 months. Cancel anytime.</div>
  </div>

  <!-- Toggle Section -->
  <div class="flex items-center gap-6 justify-center text-center bg-[#F5F5F5] border border-[#E0E0E0] rounded-[10px] py-3 px-4 mb-2">
    <div class="text-[14px] md:text-[15px] font-normal !leading-tight text-[#001C19]">
      One-Time<br>Purchase
    </div>
    <div class="toggle sub-onetime-toggle group cursor-pointer select-none active">
      <div class="toggle-box w-14 h-7 rounded-full !block bg-gray-300 group-[.active]:bg-[#00B7A2] relative transition-all duration-300">
        <div class="toggle-knob w-6 h-6 bg-white rounded-full !block absolute top-0.5 left-0.5 transition-all duration-300 group-[.active]:translate-x-7 shadow-sm"></div>
      </div>
    </div>
    <div class="text-[14px] md:text-[15px] font-bold !leading-tight text-[#001C19]">
      Subscribe<br>& Save 20%
    </div>
  </div>

  <!-- Free Shipping Bar -->
  <div class="sub-only-content bg-[#F5F5F5] border border-[#E0E0E0] rounded-[10px] py-2 px-4 text-center mb-4">
    <span class="text-[14px] text-[#001C19]">âœ“ Free fast shipping</span>
  </div>

  <!-- Mini FAQs -->
  <div class="sub-only-content flex flex-col gap-1 mb-4">
    <details class="group bg-white border border-[#E0E0E0] rounded-lg">
      <summary class="flex items-center justify-between cursor-pointer px-4 py-2.5 text-[14px] font-medium text-[#001C19] list-none">
        <span>What exactly do I get?</span>
        <svg class="w-4 h-4 text-[#00B7A2] transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
      </summary>
      <div class="px-4 pb-3 text-[13px] text-[#666] leading-relaxed">
        <strong>Today:</strong> Dispenser(s) + 3-month cartridges.<br>
        <strong>In 3 months:</strong> Refill cartridges only (20% off).
      </div>
    </details>

    <details class="group bg-white border border-[#E0E0E0] rounded-lg">
      <summary class="flex items-center justify-between cursor-pointer px-4 py-2.5 text-[14px] font-medium text-[#001C19] list-none">
        <span>Can I cancel anytime?</span>
        <svg class="w-4 h-4 text-[#00B7A2] transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
      </summary>
      <div class="px-4 pb-3 text-[13px] text-[#666] leading-relaxed">
        Yes! Cancel, skip, or pause with one click. No commitments.
      </div>
    </details>

    <details class="group bg-white border border-[#E0E0E0] rounded-lg">
      <summary class="flex items-center justify-between cursor-pointer px-4 py-2.5 text-[14px] font-medium text-[#001C19] list-none">
        <span>What if it doesn't fit my toilet?</span>
        <svg class="w-4 h-4 text-[#00B7A2] transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
      </summary>
      <div class="px-4 pb-3 text-[13px] text-[#666] leading-relaxed">
        Fits 95% of toilets. Full refund within 90 days if not.
      </div>
    </details>
  </div>

</div>

<style>
  #productsVariants variant-selects + variant-selects {
    display: none !important;
    height: 0;
    opacity: 0!important;
    visibility: invisible!important;
  }
</style>

<script>
    const toggle = document.querySelector('.toggle');
    if (toggle) {
      const subOnlyElements = document.querySelectorAll('.sub-only-content');

      toggle.addEventListener('click', function () {
        this.classList.toggle('active');
        const isActive = this.classList.contains('active');
        const productsVariants = document.querySelector('#productsVariants');

        if (!isActive) {
          const input = document.querySelector('input[re-sub-widget__selling-plan-input]');
          if (input) input.value = '';
          if (productsVariants) {
            productsVariants.classList.remove('show-subscription');
            productsVariants.classList.add('show-onetime');
          }
          subOnlyElements.forEach(el => el.style.display = 'none');
        } else {
          const selectedLabel = document.querySelector(
            '.product-form__input--pill input[type=radio].new-lp-variant--inut-sub:checked+label.new-lp-variant--label-sub'
          );
          if (selectedLabel) {
            const subId = selectedLabel.getAttribute('data-subscription-id');
            const input = document.querySelector('input[re-sub-widget__selling-plan-input]');
            if (input) input.value = subId;
          }
          if (productsVariants) {
            productsVariants.classList.remove('show-onetime');
            productsVariants.classList.add('show-subscription');
          }
          subOnlyElements.forEach(el => el.style.display = '');
        }
      });
    }
</script>
